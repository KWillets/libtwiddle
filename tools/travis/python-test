#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail

function init_deps {
  cd python
  virtualenv .venv
  set +o nounset
  source .venv/bin/activate
  set -o nounset
  pip install pytest hypothesis==1.19.0
}


function run_tests {
  if [ ${TRAVIS_PULL_REQUEST:-} -ne false ]; then
    PYTHONPATH=. py.test tests
  fi
}

init_deps
run_tests
